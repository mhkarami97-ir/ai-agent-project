<!doctype html>
<html lang="fa"
      dir="rtl">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1"/>
    <meta name="theme-color"
          content="#7c5cff"/>
    <meta name="description"
          content="مجموعه ابزارهای آنلاین ساخته شده با هوش مصنوعی - Web Tools Collection"/>
    <meta name="apple-mobile-web-app-capable"
          content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style"
          content="black-translucent"/>
    <meta name="apple-mobile-web-app-title"
          content="Web Tools"/>
    <link rel="icon"
          type="image/png"
          sizes="32x32"
          href="/favicon.png">
    <link rel="apple-touch-icon"
          href="/favicon.png"/>
    <link rel="manifest"
          href="/manifest.json"/>
    <title>
        ابزارهای
        وب
        |
        Web
        Tools</title>
    <link rel="preconnect"
          href="https://fonts.googleapis.com">
    <link rel="preconnect"
          href="https://fonts.gstatic.com"
          crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap"
          rel="stylesheet">
    <style>
        :root {
            --bg0: #0b1020;
            --bg1: #0f1730;
            --card: rgba(255, 255, 255, .08);
            --border: rgba(255, 255, 255, .14);
            --text: rgba(255, 255, 255, .92);
            --muted: rgba(255, 255, 255, .72);
            --accent: #7c5cff;
            --accent2: #2ee9a6;
            --shadow: 0 20px 60px rgba(0, 0, 0, .45);
            --radius: 18px;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg0: #f6f7fb;
                --bg1: #ffffff;
                --card: rgba(0, 0, 0, .04);
                --border: rgba(0, 0, 0, .10);
                --text: rgba(0, 0, 0, .88);
                --muted: rgba(0, 0, 0, .62);
                --shadow: 0 16px 50px rgba(18, 24, 40, .14);
            }
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            min-height: 100dvh;
            color: var(--text);
            font-family: 'Vazirmatn', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            background: radial-gradient(900px 500px at 20% 10%, rgba(124, 92, 255, .35), transparent 60%),
            radial-gradient(700px 450px at 85% 25%, rgba(46, 233, 166, .22), transparent 55%),
            linear-gradient(180deg, var(--bg0), var(--bg1));
            display: grid;
            place-items: center;
            padding: 28px 16px;
        }

        .wrap {
            width: min(1100px, 100%);
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 14px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        h1 {
            margin: 0;
            font-size: clamp(22px, 3vw, 32px);
            letter-spacing: .2px;
            font-weight: 700;
        }

        .hint {
            margin: 0;
            color: var(--muted);
            font-size: 14px;
        }

        .search-box {
            width: 100%;
            max-width: 400px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 44px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
            font-size: 15px;
            font-family: 'Vazirmatn', sans-serif;
            transition: border-color .2s ease;
            backdrop-filter: blur(10px);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .search-input::placeholder {
            color: var(--muted);
        }

        .search-icon {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--muted);
            pointer-events: none;
        }

        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        nav {
            padding: 8px;
        }

        ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 10px;
        }

        a.link {
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: center;
            gap: 16px;
            padding: 16px;
            border-radius: 14px;
            text-decoration: none;
            color: var(--text);
            border: 1px solid transparent;
            background: rgba(255, 255, 255, .06);
            transition: transform .12s ease, background .12s ease, border-color .12s ease;
        }

        a.link:hover {
            transform: translateY(-1px);
            border-color: rgba(124, 92, 255, .35);
            background: rgba(124, 92, 255, .12);
        }

        a.link:active {
            transform: translateY(0);
        }

        a.link:focus-visible {
            outline: 2px solid var(--accent);
            outline-offset: 3px;
        }

        .icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(124, 92, 255, .15);
            border-radius: 12px;
            flex-shrink: 0;
        }

        .icon svg {
            width: 28px;
            height: 28px;
            fill: var(--accent);
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            min-width: 0;
        }

        .lang-section {
            display: grid;
            gap: 4px;
            min-width: 0;
        }

        .name {
            font-weight: 600;
            letter-spacing: .15px;
            font-size: 15px;
        }

        .desc {
            font-size: 13px;
            color: var(--muted);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .en {
            text-align: left;
            direction: ltr;
        }

        .fa {
            text-align: right;
            direction: rtl;
        }

        .no-results {
            text-align: center;
            padding: 48px 24px;
            color: var(--muted);
        }

        .no-results-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        footer {
            margin-top: 16px;
            color: var(--muted);
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }

        .kbd {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
            padding: 2px 8px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, .05);
            color: var(--text);
        }

        .stats-bar {
            padding: 12px 16px;
            background: rgba(124, 92, 255, .08);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .count {
            color: var(--accent2);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            a.link {
                grid-template-columns: auto 1fr;
                gap: 12px;
            }

            header {
                flex-direction: column;
                align-items: stretch;
            }

            .search-box {
                max-width: 100%;
            }
        }

        .hidden {
            display: none !important;
        }

        .theme-toggle {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            transition: all .2s ease;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .theme-toggle:hover {
            background: rgba(124, 92, 255, .12);
            border-color: rgba(124, 92, 255, .35);
            transform: scale(1.05);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            padding: 14px 20px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(124, 92, 255, .4);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            animation: slideUp .3s ease;
            max-width: calc(100% - 40px);
        }

        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        .install-prompt-text {
            flex: 1;
            min-width: 0;
        }

        .install-prompt-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 2px;
        }

        .install-prompt-desc {
            font-size: 13px;
            opacity: .9;
        }

        .install-btn {
            background: rgba(255, 255, 255, .25);
            border: 1px solid rgba(255, 255, 255, .3);
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Vazirmatn', sans-serif;
            font-weight: 600;
            font-size: 14px;
            transition: all .2s ease;
            white-space: nowrap;
        }

        .install-btn:hover {
            background: rgba(255, 255, 255, .35);
            transform: scale(1.05);
        }

        .close-install {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 20px;
            padding: 4px;
            line-height: 1;
            opacity: .8;
            transition: opacity .2s;
        }

        .close-install:hover {
            opacity: 1;
        }

        body[data-theme="light"] {
            --bg0: #f6f7fb;
            --bg1: #ffffff;
            --card: rgba(0, 0, 0, .06);
            --border: rgba(0, 0, 0, .18);
            --text: rgba(0, 0, 0, .88);
            --muted: rgba(0, 0, 0, .62);
            --shadow: 0 16px 50px rgba(18, 24, 40, .14);
        }

        body[data-theme="light"] a.link {
            background: rgba(124, 92, 255, .04);
            border: 1px solid rgba(0, 0, 0, .12);
        }

        body[data-theme="light"] a.link:hover {
            background: rgba(124, 92, 255, .12);
            border-color: rgba(124, 92, 255, .45);
            box-shadow: 0 4px 12px rgba(124, 92, 255, .15);
        }

        body[data-theme="light"] .icon {
            background: rgba(124, 92, 255, .12);
            border: 1px solid rgba(124, 92, 255, .2);
        }

        body[data-theme="light"] .stats-bar {
            background: rgba(124, 92, 255, .06);
            border-bottom: 1px solid rgba(0, 0, 0, .12);
        }

        body[data-theme="light"] .card {
            background: rgba(255, 255, 255, .85);
            backdrop-filter: blur(20px);
        }

        body[data-theme="dark"] {
            --bg0: #0b1020;
            --bg1: #0f1730;
            --card: rgba(255, 255, 255, .08);
            --border: rgba(255, 255, 255, .14);
            --text: rgba(255, 255, 255, .92);
            --muted: rgba(255, 255, 255, .72);
            --shadow: 0 20px 60px rgba(0, 0, 0, .45);
        }
    </style>
</head>
<body>
<div class="wrap">
    <header>
        <div class="header-content">
            <h1>
                🛠️
                ابزارهای
                وب
                |
                Web
                Tools</h1>
            <p class="hint">
                مجموعه
                ابزارهای
                آنلاین
                ساخته
                شده
                با
                هوش
                مصنوعی</p>
        </div>
        <div style="display: flex; gap: 12px; align-items: center;">
            <div class="search-box">
                <span class="search-icon">🔍</span>
                <input type="text"
                       class="search-input"
                       id="searchInput"
                       placeholder="جستجوی ابزار..."/>
            </div>
            <button class="theme-toggle"
                    id="themeToggle"
                    title="تغییر تم"
                    aria-label="Toggle theme">
                <span id="themeIcon">🌙</span>
            </button>
        </div>
    </header>

    <section
            class="card"
            aria-label="Tools list">
        <div class="stats-bar">
            <span>تعداد ابزارها: <span
                    class="count"
                    id="totalCount">0</span></span>
            <span id="filteredInfo"></span>
        </div>
        <nav aria-label="Tools">
            <ul id="toolsList">
            </ul>
            <div id="noResults"
                 class="no-results hidden">
                <div class="no-results-icon">
                    🔍
                </div>
                <p>
                    هیچ
                    ابزاری
                    یافت
                    نشد</p>
                <p style="font-size: 13px;">
                    لطفاً
                    کلمات
                    دیگری
                    را
                    امتحان
                    کنید</p>
            </div>
        </nav>
    </section>

    <footer>
        <span>استفاده از <span
                class="kbd">Tab</span> برای حرکت و <span
                class="kbd">Enter</span> برای باز کردن</span>
        <span>mhkarami97.ir</span>
    </footer>
</div>

<script>
    const tools = [
        {
            path: 'weather',
            faName: 'وضعیت هوا',
            enName: 'Weather',
            faDesc: 'نمایش وضعیت آب و هوای امروز',
            enDesc: 'Show today\'s weather',
            icon: '🌤️'
        },
        {
            path: 'chat',
            faName: 'چت',
            enName: 'Chat',
            faDesc: 'سیستم چت آنلاین',
            enDesc: 'Online chat system',
            icon: '💬'
        },
        {
            path: 'compress',
            faName: 'فشرده‌ساز تصویر',
            enName: 'Image Compressor',
            faDesc: 'فشرده‌سازی تصاویر در مرورگر',
            enDesc: 'Compress images in browser',
            icon: '🗜️'
        },
        {
            path: 'compress-file',
            faName: 'فشرده‌ساز فایل',
            enName: 'File Compressor',
            faDesc: 'فشرده‌سازی HTML, CSS, JS',
            enDesc: 'Compress HTML, CSS, JS files',
            icon: '📦'
        },
        {
            path: 'qr',
            faName: 'کیوآر کد',
            enName: 'QR Code',
            faDesc: 'ساخت و خواندن کد QR',
            enDesc: 'Generate and read QR codes',
            icon: '📱'
        },
        {
            path: 'color',
            faName: 'پالت رنگ',
            enName: 'Color Palette',
            faDesc: 'ژنراتور پالت رنگ هماهنگ',
            enDesc: 'Harmonious color palette generator',
            icon: '🎨'
        },
        {
            path: 'json',
            faName: 'JSON',
            enName: 'JSON Formatter',
            faDesc: 'فرمت و اعتبارسنجی JSON',
            enDesc: 'Format and validate JSON',
            icon: '📋'
        },
        {
            path: 'editor',
            faName: 'ویرایشگر متن',
            enName: 'Text Editor',
            faDesc: 'ویرایشگر متن پیشرفته',
            enDesc: 'Advanced text editor',
            icon: '📝'
        },
        {
            path: 'text',
            faName: 'ژنراتور متن',
            enName: 'Text Generator',
            faDesc: 'تولید محتوای متنی',
            enDesc: 'Generate text content',
            icon: '✍️'
        },
        {
            path: 'text-counter',
            faName: 'شمارنده متن',
            enName: 'Text Counter',
            faDesc: 'شمارش کلمات و کاراکترها',
            enDesc: 'Count words and characters',
            icon: '🔢'
        },
        {
            path: 'text-formatter',
            faName: 'فرمت‌دهنده متن',
            enName: 'Text Formatter',
            faDesc: 'فرمت‌دهی و تبدیل متن',
            enDesc: 'Format and transform text',
            icon: '📄'
        },
        {
            path: 'encoder',
            faName: 'رمزگذار',
            enName: 'Encoder',
            faDesc: 'رمزگذاری و رمزگشایی داده',
            enDesc: 'Encode and decode data',
            icon: '🔐'
        },
        {
            path: 'password',
            faName: 'رمز عبور',
            enName: 'Password Generator',
            faDesc: 'تولید رمز عبور امن',
            enDesc: 'Generate secure passwords',
            icon: '🔑'
        },
        {
            path: 'secure-text',
            faName: 'متن امن',
            enName: 'Secure Text',
            faDesc: 'مدیریت متن‌های امن',
            enDesc: 'Manage secure texts',
            icon: '🔒'
        },
        {
            path: 'convertor',
            faName: 'تبدیل واحد',
            enName: 'Unit Converter',
            faDesc: 'تبدیل واحدهای مختلف',
            enDesc: 'Convert various units',
            icon: '🔄'
        },
        {
            path: 'currency-conversion-calculator',
            faName: 'تبدیل ارز',
            enName: 'Currency Converter',
            faDesc: 'تبدیل ارزهای مختلف',
            enDesc: 'Convert currencies',
            icon: '💱'
        },
        {
            path: 'date',
            faName: 'تاریخ',
            enName: 'Date Converter',
            faDesc: 'تبدیل و نمایش تاریخ',
            enDesc: 'Convert and display dates',
            icon: '📅'
        },
        {
            path: 'time',
            faName: 'زمان',
            enName: 'Time & Clock',
            faDesc: 'ساعت و زمان',
            enDesc: 'Clock and time',
            icon: '⏰'
        },
        {
            path: 'time-tracker',
            faName: 'زمان‌سنج',
            enName: 'Time Tracker',
            faDesc: 'ردیابی زمان کارها',
            enDesc: 'Track time for tasks',
            icon: '⏱️'
        },
        {
            path: 'pomodoro-timer',
            faName: 'تایمر پومودورو',
            enName: 'Pomodoro Timer',
            faDesc: 'مدیریت زمان با روش پومودورو',
            enDesc: 'Manage time with Pomodoro technique',
            icon: '🍅'
        },
        {
            path: 'daily-planner',
            faName: 'برنامه‌ریز روزانه',
            enName: 'Daily Planner',
            faDesc: 'برنامه‌ریزی وظایف روزانه',
            enDesc: 'Plan your daily tasks',
            icon: '📆'
        },
        {
            path: 'note',
            faName: 'یادداشت',
            enName: 'Note',
            faDesc: 'یادداشت‌برداری سریع',
            enDesc: 'Quick note-taking',
            icon: '📓'
        },
        {
            path: 'check-list',
            faName: 'چک‌لیست',
            enName: 'Checklist',
            faDesc: 'مدیریت چک‌لیست‌ها',
            enDesc: 'Manage checklists',
            icon: '✅'
        },
        {
            path: 'habit',
            faName: 'ردیاب عادت',
            enName: 'Habit Tracker',
            faDesc: 'ردیابی عادت‌های روزانه',
            enDesc: 'Track daily habits',
            icon: '🎯'
        },
        {
            path: 'cost-divider',
            faName: 'تقسیم هزینه',
            enName: 'Cost Divider',
            faDesc: 'تقسیم هزینه‌های مشترک',
            enDesc: 'Split shared expenses',
            icon: '💰'
        },
        {
            path: 'debt',
            faName: 'مدیریت بدهی',
            enName: 'Debt Manager',
            faDesc: 'مدیریت بدهی‌ها',
            enDesc: 'Manage debts',
            icon: '💳'
        },
        {
            path: 'personal-budget-planner',
            faName: 'بودجه شخصی',
            enName: 'Budget Planner',
            faDesc: 'برنامه‌ریزی بودجه شخصی',
            enDesc: 'Plan personal budget',
            icon: '💵'
        },
        {
            path: 'medicine',
            faName: 'مدیریت دارو',
            enName: 'Medicine Manager',
            faDesc: 'مدیریت داروها',
            enDesc: 'Manage medicines',
            icon: '💊'
        },
        {
            path: 'warranty-management',
            faName: 'مدیریت گارانتی',
            enName: 'Warranty Manager',
            faDesc: 'مدیریت گارانتی‌ها',
            enDesc: 'Manage warranties',
            icon: '📜'
        },
        {
            path: 'home-tracker',
            faName: 'ردیاب خانه',
            enName: 'Home Tracker',
            faDesc: 'مدیریت اشیاء منزل',
            enDesc: 'Manage home objects',
            icon: '🏠'
        },
        {
            path: 'travel',
            faName: 'برنامه سفر',
            enName: 'Travel Planner',
            faDesc: 'برنامه‌ریزی سفرها',
            enDesc: 'Plan your trips',
            icon: '✈️'
        },
        {
            path: 'meeting-finder',
            faName: 'جلسه‌یاب',
            enName: 'Meeting Finder',
            faDesc: 'زمان‌بندی جلسات',
            enDesc: 'Schedule meetings',
            icon: '🤝'
        },
        {
            path: 'regex',
            faName: 'رجکس',
            enName: 'Regex Tester',
            faDesc: 'تست عبارات منظم',
            enDesc: 'Test regular expressions',
            icon: '🔍'
        },
        {
            path: 'compare',
            faName: 'مقایسه متن',
            enName: 'Text Compare',
            faDesc: 'مقایسه متن‌ها',
            enDesc: 'Compare texts',
            icon: '🔀'
        },
        {
            path: 'mapper',
            faName: 'نقشه',
            enName: 'Mapper',
            faDesc: 'نقشه و مکان‌یابی',
            enDesc: 'Map and location',
            icon: '🗺️'
        },
        {
            path: 'downloader',
            faName: 'دانلودر',
            enName: 'Downloader',
            faDesc: 'دانلود فایل‌ها',
            enDesc: 'Download files',
            icon: '⬇️'
        },
        {
            path: 'meta-data',
            faName: 'متادیتا',
            enName: 'Metadata Viewer',
            faDesc: 'نمایش متادیتای تصاویر',
            enDesc: 'View image metadata',
            icon: '🖼️'
        },
        {
            path: 'ocr',
            faName: 'تشخیص متن',
            enName: 'OCR',
            faDesc: 'تشخیص نوشتار روی تصاویر',
            enDesc: 'Optical character recognition',
            icon: '👁️'
        },
        {
            path: 'water-mark',
            faName: 'واترمارک',
            enName: 'Watermark',
            faDesc: 'افزودن واترمارک به تصاویر',
            enDesc: 'Add watermark to images',
            icon: '©️'
        },
        {
            path: 'favicon',
            faName: 'فاویکون',
            enName: 'Favicon Generator',
            faDesc: 'ساخت فاویکون',
            enDesc: 'Generate favicon',
            icon: '🎴'
        },
        {
            path: 'cron',
            faName: 'کران جاب',
            enName: 'Cron Job',
            faDesc: 'زمان‌بند وظایف',
            enDesc: 'Task scheduler',
            icon: '⚙️'
        },
        {
            path: 'log-analyzer',
            faName: 'تحلیل لاگ',
            enName: 'Log Analyzer',
            faDesc: 'تحلیل فایل‌های لاگ',
            enDesc: 'Analyze log files',
            icon: '📊'
        },
        {
            path: 'leitner',
            faName: 'سیستم لایتنر',
            enName: 'Leitner System',
            faDesc: 'یادگیری با فلش کارت',
            enDesc: 'Learn with flashcards',
            icon: '🎓'
        },
        {
            path: 'typing',
            faName: 'تمرین تایپ',
            enName: 'Typing Practice',
            faDesc: 'بهبود سرعت تایپ',
            enDesc: 'Improve typing speed',
            icon: '⌨️'
        },
        {
            path: 'mime',
            faName: 'MIME',
            enName: 'MIME Types',
            faDesc: 'شناسایی نوع فایل',
            enDesc: 'Identify file types',
            icon: '📎'
        },
        {
            path: 'osint',
            faName: 'اطلاعات باز',
            enName: 'OSINT',
            faDesc: 'جستجوی اطلاعات عمومی',
            enDesc: 'Open source intelligence',
            icon: '🕵️'
        },
        {
            path: 'question-answer',
            faName: 'پرسش و پاسخ',
            enName: 'Q&A',
            faDesc: 'سیستم پرسش و پاسخ',
            enDesc: 'Question and answer system',
            icon: '❓'
        },
        {
            path: 'mind-map',
            faName: 'نقشه ذهنی',
            enName: 'Mind Map',
            faDesc: 'ساخت نقشه ذهنی',
            enDesc: 'Create mind maps',
            icon: '🧠'
        },
        {
            path: 'metronome',
            faName: 'مترونوم',
            enName: 'Metronome',
            faDesc: 'حفظ ریتم موسیقی',
            enDesc: 'Keep musical rhythm',
            icon: '🎵'
        }
    ];

    tools.sort((a, b) => a.faName.localeCompare(b.faName, 'fa'));

    let filteredTools = [...tools];

    function renderTools() {
        const toolsList = document.getElementById('toolsList');
        const noResults = document.getElementById('noResults');

        if (filteredTools.length === 0) {
            toolsList.innerHTML = '';
            noResults.classList.remove('hidden');
            return;
        }

        noResults.classList.add('hidden');

        toolsList.innerHTML = filteredTools.map(tool => `
        <li>
            <a class="link" href="/${tool.path}/">
                <div class="icon">${tool.icon}</div>
                <div class="content">
                    <div class="lang-section fa">
                        <div class="name">${tool.faName}</div>
                        <div class="desc">${tool.faDesc}</div>
                    </div>
                    <div class="lang-section en">
                        <div class="name">${tool.enName}</div>
                        <div class="desc">${tool.enDesc}</div>
                    </div>
                </div>
            </a>
        </li>
    `).join('');

        updateStats();
    }

    function updateStats() {
        const totalCount = document.getElementById('totalCount');
        const filteredInfo = document.getElementById('filteredInfo');

        totalCount.textContent = tools.length;

        if (filteredTools.length < tools.length) {
            filteredInfo.textContent = `نمایش ${filteredTools.length} مورد`;
        } else {
            filteredInfo.textContent = '';
        }
    }

    function handleSearch(query) {
        const q = query.toLowerCase().trim();

        if (!q) {
            filteredTools = [...tools];
        } else {
            filteredTools = tools.filter(tool =>
                tool.faName.toLowerCase().includes(q) ||
                tool.enName.toLowerCase().includes(q) ||
                tool.faDesc.toLowerCase().includes(q) ||
                tool.enDesc.toLowerCase().includes(q) ||
                tool.path.toLowerCase().includes(q)
            );
        }

        renderTools();
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
        handleSearch(e.target.value);
    });

    document.addEventListener('keydown', (e) => {
        if (e.key === '/' || (e.key === 'k' && (e.metaKey || e.ctrlKey))) {
            e.preventDefault();
            document.getElementById('searchInput').focus();
        }
    });

    renderTools();

    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const body = document.body;

    function loadTheme() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            body.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        } else {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = prefersDark ? 'dark' : 'light';
            body.setAttribute('data-theme', theme);
            updateThemeIcon(theme);
        }
    }

    function updateThemeIcon(theme) {
        themeIcon.textContent = theme === 'dark' ? '🌙' : '☀️';
    }

    function toggleTheme() {
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    }

    themeToggle.addEventListener('click', toggleTheme);

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        if (!localStorage.getItem('theme')) {
            const theme = e.matches ? 'dark' : 'light';
            body.setAttribute('data-theme', theme);
            updateThemeIcon(theme);
        }
    });

    loadTheme();

    let deferredPrompt;
    const installPromptDismissed = localStorage.getItem('installPromptDismissed');

    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;

        if (!installPromptDismissed) {
            showInstallPrompt();
        }
    });

    function showInstallPrompt() {
        const prompt = document.createElement('div');
        prompt.className = 'install-prompt';
        prompt.innerHTML = `
            <div class="install-prompt-text">
                <div class="install-prompt-title">📱 نصب اپلیکیشن</div>
                <div class="install-prompt-desc">برای دسترسی سریع‌تر نصب کنید</div>
            </div>
            <button class="install-btn" id="installBtn">نصب</button>
            <button class="close-install" id="closeInstall">✕</button>
        `;
        document.body.appendChild(prompt);

        document.getElementById('installBtn').addEventListener('click', async () => {
            if (!deferredPrompt) return;

            deferredPrompt.prompt();
            const {outcome} = await deferredPrompt.userChoice;

            if (outcome === 'accepted') {
                console.log('User accepted the install prompt');
            }

            deferredPrompt = null;
            prompt.remove();
        });

        document.getElementById('closeInstall').addEventListener('click', () => {
            localStorage.setItem('installPromptDismissed', 'true');
            prompt.remove();
        });
    }

    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => {
                    console.log('SW registered:', registration);
                })
                .catch(err => {
                    console.log('SW registration failed:', err);
                });
        });
    }

    window.addEventListener('appinstalled', () => {
        console.log('App installed successfully');
        deferredPrompt = null;
    });
</script>
</body>
</html>


